<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Realidad Aumentada</title>
	<meta name="description" content="Hello, World! - A-Frame">

	<script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
	<!--<script src="/aframe.min.js"></script>-->
	<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
	
	<script src="js/funcionamiento.js"></script>
	
	<!--NO USADO-->
	<script>

		AFRAME.registerComponent('cursor-listener', {
			init: function () {
				var lastIndex = -1;
				var COLORS = ['red', 'green', 'blue', 'gray', 'pink', 'white', 'lime'];
				this.el.addEventListener('click', function (evt) {
					lastIndex = (lastIndex + 1) % COLORS.length;
					this.setAttribute('material', 'color', COLORS[lastIndex]);
					console.log('I was clicked at: ', evt.detail.intersection.point);
				});
			}
		})

		AFRAME.registerComponent('audiohandler2', {
			init: function () {

				let active = Array.prototype.slice.call(document.getElementsByClassName("sonidoTactil")).filter(x => x.object3D.visible);
				this.el.addEventListener('click', () => {
					active[0].object3D.children[0].el.components.sound.stopSound();
					active[0].object3D.children[0].el.components.sound.playSound();
				})
			}
		})
	</script>


</head>

<body style='margin : 0px; overflow: hidden;'>
	<!-- embedded arjs='sourceType: webcam; debugUIEnabled: false;' 
	embedded artoolkit='sourceType: webcam; cursor="rayOrigin: mouse"
	sourceWidth:1366; sourceHeight:768; displayWidth: 1366; displayHeight: 768;
	-->
	<a-scene
		arjs='sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;'
		vr-mode-ui="enabled: false">
		
		<a-assets>
			<audio id="sonidoKultrum" src="imagenes/tambor.mp3"></audio>
			<a-asset-item id="kultrum" src="Objetos/kultrum/kultrum2.gltf"></a-asset-item>
			<a-asset-item id="vasija" src="Objetos/vasija/vasija2.gltf"></a-asset-item>
			<a-asset-item id="hacha" src="Objetos/hacha/Hacha3_1.gltf"></a-asset-item>
			<a-asset-item id="molino" src="Objetos/molino/molino.gltf"></a-asset-item>
			<a-asset-item id="pintura" src="Objetos/pintura/pintura.gltf"></a-asset-item>
			<a-asset-item id="pipa" src="Objetos/pipa/Pipa2_2.gltf"></a-asset-item>
			<a-asset-item id="puntasFlecha" src="Objetos/puntaFlecha/PuntasFlecha.gltf"></a-asset-item>
			<a-asset-item id="tapahue" src="Objetos/tapahue/tapahue.gltf"></a-asset-item>
		</a-assets>
		
		<!--
		<a-marker preset='hiro' id='3000' registerevents>

			<!--<a-entity gltf-model="/corazon/Heart_.gltf" scale="0.05 0.05 0.05" rotation="0 -90 90"></a-entity>-->
			<!--<a-entity gltf-model="/Bee.glb" scale="0.1 0.1 0.1" animation-mixer="clip: DoStuff;"></a-entity>-->
			<!--
			<a-entity sound="src: ../tambor.mp3" geometry="primitive: box" material="color: blue" cursor-listener
				audiohandler2></a-entity>
			-->
			<!--
			<a-entity gltf-model="../Objetos/kultrum/kultrum.gltf" sound="src: /tambor.mp3"></a-entity>

		</a-marker>
		-->
		<a-marker preset='custom' type='pattern' id='3000' url='/marcadores/kultrum.patt' registerevents>

			<a-entity gltf-model="#kultrum" sound="src: #sonidoKultrum"></a-entity>

		</a-marker>
		
		<a-marker preset='custom' type='pattern' id='4000' url='/marcadores/kultrumColor.patt' registerevents>

			<!--<a-entity gltf-model="/corazon/Heart_.gltf" scale="0.05 0.05 0.05" rotation="0 -90 90"></a-entity>-->
			<!--<a-entity gltf-model="/Bee.glb" scale="0.1 0.1 0.1" animation-mixer="clip: DoStuff;"></a-entity>-->
			<!--
			<a-entity sound="src: /tambor.mp3" geometry="primitive: box" material="color: blue" cursor-listener
				audiohandler2></a-entity>
			-->
			<a-entity gltf-model="#kultrum" sound="src: #sonidoKultrum"></a-entity>

		</a-marker>

		<a-marker preset='custom' type='pattern' id='3100' url='/marcadores/vasija.patt' registerevents>
		
			<a-entity gltf-model="#vasija">

			</a-entity>
		
		</a-marker>
		
		<a-marker preset='custom' type='pattern' id='4100' url='/marcadores/vasijaColor.patt' registerevents>
		
			<a-entity gltf-model="#vasija">

			</a-entity>
		
		</a-marker>
		
		<a-marker preset='custom' type='pattern' id='3200' url='/marcadores/hacha.patt' registerevents>

			<a-entity gltf-model="#hacha"></a-entity>

		</a-marker>

		<a-marker preset='custom' type='pattern' id='4200' url='/marcadores/hachaColor.patt' registerevents>

			<a-entity gltf-model="#hacha"></a-entity>

		</a-marker>

		<a-marker preset='custom' type='pattern' id='3300' url='/marcadores/molino.patt' registerevents>

			<a-entity scale="1.5 1.5 1.5" gltf-model="#molino"></a-entity>

		</a-marker>

		<a-marker preset='custom' type='pattern' id='4300' url='/marcadores/molinoColor.patt' registerevents>

			<a-entity scale="1.5 1.5 1.5" gltf-model="#molino"></a-entity>

		</a-marker>

		<a-marker preset='custom' type='pattern' id='3400' url='/marcadores/pintura.patt' registerevents>

			<a-entity scale="0.75 0.75 0.75" gltf-model="#pintura"></a-entity>

		</a-marker>

		<a-marker preset='custom' type='pattern' id='4400' url='/marcadores/pinturaColor.patt' registerevents>

			<a-entity scale="0.75 0.75 0.75" gltf-model="#pintura"></a-entity>

		</a-marker>

		<a-marker preset='custom' type='pattern' id='3500' url='/marcadores/pipa.patt' registerevents>

			<a-entity scale="4 4 4" gltf-model="#pipa"></a-entity>

		</a-marker>

		<a-marker preset='custom' type='pattern' id='4500' url='/marcadores/pipaColor.patt' registerevents>

			<a-entity scale="4 4 4" gltf-model="#pipa"></a-entity>

		</a-marker>

		<a-marker preset='custom' type='pattern' id='3600' url='/marcadores/puntasFlecha.patt' registerevents>

			<a-entity gltf-model="#puntasFlecha"></a-entity>

		</a-marker>

		<a-marker preset='custom' type='pattern' id='4600' url='/marcadores/puntasFlechaColor.patt' registerevents>

			<a-entity gltf-model="#puntasFlecha"></a-entity>

		</a-marker>

		<a-marker preset='custom' type='pattern' id='3700' url='/marcadores/tapahue.patt' registerevents>

			<a-entity scale="0.5 0.5 0.5" gltf-model="#tapahue"></a-entity>

		</a-marker>

		<a-marker preset='custom' type='pattern' id='4700' url='/marcadores/tapahueColor.patt' registerevents>

			<a-entity scale="0.5 0.5 0.5" gltf-model="#tapahue"></a-entity>

		</a-marker>

		<!--

		<a-marker preset='custom' type='pattern' url='../vasija.patt'>
		
			<a-entity gltf-model="../lampara/Lantern.gltf" scale="0.05 0.05 0.05">

			</a-entity>
		
		</a-marker>

		-->

		<a-entity camera> <a-cursor material="opacity:  0;"></a-cursor>
		</a-entity>

		<div id="info-button" style='width:20%; position: fixed; bottom:0; right:0; z-index: 1; user-select: none;'>
			<a href="#">
				<input style="margin:15%" width="70%" type="image" src="../imagenes/logo2.png">
				</input>
			</a>
		</div>

		<div class="barraObj" style="user-select: none;">
			<div>
				<p style="font-size: large;" id="infoV">----------</p>
			</div>
		</div>

		<div id="universidad-button" style='width:5%; position: fixed; bottom:0; left:0; z-index: 1; user-select: none;'>
			<a href="#">
				<input style="margin:15%; width: 300%;"  type="image" src="../imagenes/LOGO UNCO.png">
				</input>
			</a>
		</div>

	</a-scene>

</body>

</html>
